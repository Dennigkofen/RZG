<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geschichte der Welt - Ein Zeitstrahl</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Text', serif;
            background: linear-gradient(45deg, #2c1810 0%, #8b4513 25%, #daa520 50%, #8b4513 75%, #2c1810 100%);
            background-size: 400% 400%;
            animation: ancientGradient 20s ease infinite;
            min-height: 100vh;
            color: #3a2817;
        }

        @keyframes ancientGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(218, 165, 32, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(139, 69, 19, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(160, 82, 45, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 60px;
            background: rgba(139, 69, 19, 0.9);
            padding: 40px;
            border-radius: 15px;
            border: 3px solid #daa520;
            box-shadow: 
                0 0 30px rgba(218, 165, 32, 0.4),
                inset 0 0 20px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: linear-gradient(45deg, #daa520, #b8860b, #daa520);
            border-radius: 18px;
            z-index: -1;
        }

        .header h1 {
            font-family: 'Cinzel', serif;
            font-size: 3.5em;
            margin-bottom: 15px;
            color: #f4d03f;
            text-shadow: 
                2px 2px 0px #8b4513,
                4px 4px 10px rgba(0, 0, 0, 0.5);
            letter-spacing: 3px;
        }

        .header p {
            font-size: 1.3em;
            color: #f8e6a0;
            font-style: italic;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 40px;
            margin-bottom: 60px;
        }

        .category-card {
            background: linear-gradient(135deg, #f4e4bc 0%, #e8d5a3 100%);
            border: 4px solid #8b4513;
            border-radius: 20px;
            padding: 35px;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            box-shadow: 
                0 8px 25px rgba(139, 69, 19, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 2px solid #daa520;
            border-radius: 12px;
            opacity: 0.6;
        }

        .category-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 
                0 15px 40px rgba(139, 69, 19, 0.6),
                0 0 30px rgba(218, 165, 32, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            border-color: #daa520;
        }

        .category-card h3 {
            font-family: 'Cinzel', serif;
            color: #5d4037;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }

        .category-card p {
            color: #6d4c41;
            line-height: 1.7;
            font-size: 1.1em;
            text-align: center;
        }

        .timeline-container {
            display: none;
            background: linear-gradient(135deg, #f4e4bc 0%, #e8d5a3 100%);
            border: 4px solid #8b4513;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 
                0 10px 30px rgba(139, 69, 19, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            border-bottom: 3px solid #8b4513;
            padding-bottom: 20px;
            background: rgba(139, 69, 19, 0.1);
            padding: 20px;
            border-radius: 10px;
        }

        .timeline-header h2 {
            font-family: 'Cinzel', serif;
            color: #5d4037;
            font-size: 2.2em;
            font-weight: 600;
        }

        .back-btn {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            color: #f4d03f;
            border: 2px solid #daa520;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .back-btn:hover {
            background: linear-gradient(135deg, #a0522d 0%, #8b4513 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.4);
        }

        .timeline {
            position: relative;
            max-width: 100%;
            margin: 0 auto;
        }

        .timeline::after {
            content: '';
            position: absolute;
            width: 6px;
            background: linear-gradient(180deg, #8b4513, #daa520, #8b4513);
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -3px;
            border-radius: 3px;
            box-shadow: 0 0 10px rgba(139, 69, 19, 0.5);
        }

        .timeline-item {
            padding: 25px 50px;
            position: relative;
            background-color: inherit;
            width: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .timeline-item:hover {
            transform: scale(1.03);
        }

        .timeline-item::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            background: radial-gradient(circle, #daa520 0%, #b8860b 100%);
            border: 5px solid #8b4513;
            top: 35px;
            border-radius: 50%;
            z-index: 1;
            box-shadow: 
                0 0 0 3px #daa520,
                0 0 15px rgba(218, 165, 32, 0.6);
        }

        .left {
            left: 0;
        }

        .right {
            left: 50%;
        }

        .left::after {
            right: -17px;
        }

        .right::after {
            left: -17px;
        }

        .timeline-content {
            padding: 25px 30px;
            background: linear-gradient(135deg, #faf0e6 0%, #f5deb3 100%);
            position: relative;
            border-radius: 15px;
            border: 3px solid #8b4513;
            box-shadow: 
                0 8px 20px rgba(139, 69, 19, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .timeline-content::before {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border: 1px solid #daa520;
            border-radius: 10px;
            opacity: 0.5;
        }

        .timeline-content h3 {
            font-family: 'Cinzel', serif;
            color: #5d4037;
            font-size: 1.4em;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .timeline-content .time {
            color: #8b4513;
            font-weight: bold;
            font-size: 1em;
            margin-bottom: 12px;
            font-style: italic;
        }

        .timeline-content p {
            color: #6d4c41;
            line-height: 1.6;
            font-size: 1em;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(44, 24, 16, 0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #f4e4bc 0%, #e8d5a3 100%);
            margin: 3% auto;
            padding: 40px;
            border: 4px solid #8b4513;
            border-radius: 20px;
            width: 85%;
            max-width: 900px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 
                0 20px 50px rgba(139, 69, 19, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            border-bottom: 3px solid #8b4513;
            padding-bottom: 20px;
        }

        .modal-header h3 {
            font-family: 'Cinzel', serif;
            color: #5d4037;
            font-size: 2em;
            margin: 0;
            font-weight: 600;
        }

        .close {
            color: #8b4513;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
            line-height: 1;
        }

        .close:hover {
            color: #daa520;
        }

        .modal-body {
            color: #5d4037;
            line-height: 1.8;
            font-size: 1.1em;
        }

        .modal-body .time {
            color: #8b4513;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 20px;
            display: block;
            font-style: italic;
        }

        .modal-body .quote {
            background: rgba(139, 69, 19, 0.1);
            border-left: 4px solid #daa520;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            font-style: italic;
            color: #6d4c41;
        }

        .ai-chat {
            background: linear-gradient(135deg, #f4e4bc 0%, #e8d5a3 100%);
            border: 4px solid #8b4513;
            border-radius: 20px;
            padding: 35px;
            margin-top: 40px;
            box-shadow: 
                0 10px 30px rgba(139, 69, 19, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .chat-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .chat-header h3 {
            font-family: 'Cinzel', serif;
            color: #5d4037;
            font-size: 1.8em;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .chat-header p {
            color: #6d4c41;
            font-size: 1.1em;
            font-style: italic;
        }

        .chat-container {
            background: #faf0e6;
            border: 2px solid #8b4513;
            border-radius: 15px;
            padding: 25px;
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 25px;
            box-shadow: inset 0 2px 10px rgba(139, 69, 19, 0.2);
        }

        .chat-input-container {
            display: flex;
            gap: 15px;
        }

        .chat-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #8b4513;
            border-radius: 10px;
            font-size: 1.1em;
            font-family: 'Crimson Text', serif;
            background: #faf0e6;
            color: #5d4037;
            transition: border-color 0.3s ease;
        }

        .chat-input:focus {
            outline: none;
            border-color: #daa520;
            box-shadow: 0 0 10px rgba(218, 165, 32, 0.3);
        }

        .chat-send {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            color: #f4d03f;
            border: 2px solid #daa520;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .chat-send:hover {
            background: linear-gradient(135deg, #a0522d 0%, #8b4513 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.4);
        }

        .chat-message {
            margin-bottom: 18px;
            padding: 15px 20px;
            border-radius: 15px;
            max-width: 80%;
            line-height: 1.6;
        }

        .user-message {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            color: #f4d03f;
            margin-left: auto;
            border: 2px solid #daa520;
        }

        .ai-message {
            background: #ffffff;
            color: #5d4037;
            border: 2px solid #daa520;
            box-shadow: 0 2px 8px rgba(139, 69, 19, 0.2);
        }

        .loading {
            display: none;
            text-align: center;
            color: #8b4513;
            font-style: italic;
            font-size: 1.1em;
            margin: 10px 0;
        }

        .admin-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            color: #f4d03f;
            border: 2px solid #daa520;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .admin-btn:hover {
            background: linear-gradient(135deg, #a0522d 0%, #8b4513 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.4);
        }

        .admin-panel {
            display: none;
            background: linear-gradient(135deg, #f4e4bc 0%, #e8d5a3 100%);
            border: 4px solid #8b4513;
            border-radius: 20px;
            padding: 35px;
            margin-top: 40px;
            box-shadow: 
                0 10px 30px rgba(139, 69, 19, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .admin-header {
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 3px solid #8b4513;
            padding-bottom: 20px;
        }

        .admin-header h3 {
            font-family: 'Cinzel', serif;
            color: #5d4037;
            font-size: 1.8em;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .login-form, .add-event-form {
            max-width: 500px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-family: 'Cinzel', serif;
            color: #5d4037;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #8b4513;
            border-radius: 8px;
            font-size: 1em;
            font-family: 'Crimson Text', serif;
            background: #faf0e6;
            color: #5d4037;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #daa520;
            box-shadow: 0 0 10px rgba(218, 165, 32, 0.3);
        }

        .form-group textarea {
            height: 100px;
            resize: vertical;
        }

        .form-btn {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            color: #f4d03f;
            border: 2px solid #daa520;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            width: 100%;
            margin-top: 10px;
        }

        .form-btn:hover {
            background: linear-gradient(135deg, #a0522d 0%, #8b4513 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.4);
        }

        .logout-btn {
            background: linear-gradient(135deg, #8b4513 0%, #a0522d 100%);
            color: #f4d03f;
            border: 2px solid #daa520;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            float: right;
            margin-bottom: 20px;
        }

        .logout-btn:hover {
            background: linear-gradient(135deg, #a0522d 0%, #8b4513 100%);
            transform: translateY(-2px);
        }

        .success-message {
            background: rgba(34, 139, 34, 0.1);
            border: 2px solid #228b22;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            color: #006400;
            font-weight: bold;
            text-align: center;
        }

        .error-message {
            background: rgba(220, 20, 60, 0.1);
            border: 2px solid #dc143c;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            color: #8b0000;
            font-weight: bold;
            text-align: center;
        }

        .form-tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 2px solid #8b4513;
        }

        .tab-btn {
            flex: 1;
            background: transparent;
            border: none;
            padding: 15px 20px;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            color: #8b4513;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab-btn.active {
            color: #5d4037;
            border-bottom-color: #daa520;
            background: rgba(218, 165, 32, 0.1);
        }

        .tab-btn:hover {
            background: rgba(218, 165, 32, 0.05);
        }

        .tab-content {
            min-height: 400px;
        }

        .event-item {
            background: #faf0e6;
            border: 2px solid #8b4513;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .event-info h4 {
            color: #5d4037;
            margin: 0 0 5px 0;
            font-family: 'Cinzel', serif;
        }

        .event-info p {
            color: #6d4c41;
            margin: 0;
            font-size: 0.9em;
        }

        .delete-btn {
            background: linear-gradient(135deg, #dc143c 0%, #b91c4c 100%);
            color: white;
            border: 2px solid #8b0000;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .delete-btn:hover {
            background: linear-gradient(135deg, #b91c4c 0%, #dc143c 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 20, 60, 0.4);
        }

        @media screen and (max-width: 768px) {
            .timeline::after {
                left: 31px;
            }

            .timeline-item {
                width: 100%;
                padding-left: 80px;
                padding-right: 25px;
            }

            .timeline-item::after {
                left: 21px;
            }

            .right {
                left: 0%;
            }

            .modal-content {
                width: 95%;
                margin: 10% auto;
                padding: 25px;
            }

            .header h1 {
                font-size: 2.5em;
            }

            .category-grid {
                grid-template-columns: 1fr;
            }

            .timeline-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📜 Historia Mundi 📜</h1>
            <p>Eine Reise durch die Zeit - vom Urknall bis zur Antike</p>
            <button class="admin-btn" onclick="showAdminLogin()">⚙️ Admin</button>
        </div>

        <div id="home-view">
            <div class="category-grid">
                <div class="category-card" onclick="showTimeline('urgeschichte')">
                    <h3>🌌 Urgeschichte</h3>
                    <p>13,8 Milliarden - 3,5 Milliarden Jahre: Vom Big Bang bis zum ersten Leben auf der Erde. Die Entstehung des Universums, der Sterne und unseres Planeten.</p>
                </div>
                <div class="category-card" onclick="showTimeline('erdzeitalter')">
                    <h3>🦕 Erdzeitalter und frühe Menschheit</h3>
                    <p>3,5 Milliarden - 10.000 Jahre: Evolution des Lebens bis zur neolithischen Revolution. Von den ersten Zellen zu den modernen Menschen.</p>
                </div>
                <div class="category-card" onclick="showTimeline('fruehgeschichte')">
                    <h3>🌾 Frühgeschichte</h3>
                    <p>10.000 - 3.000 Jahre: Von der Landwirtschaft zu den ersten Hochkulturen. Die Erfindung von Ackerbau, Schrift und Bronze.</p>
                </div>
                <div class="category-card" onclick="showTimeline('antike')">
                    <h3>🏛️ Antike</h3>
                    <p>3.000 Jahre - Christi Geburt: Hochkulturen, Großreiche und klassische Zivilisationen. Ägypten, Griechenland, Rom und andere Weltreiche.</p>
                </div>
            </div>
        </div>

        <div id="timeline-view" class="timeline-container">
            <div class="timeline-header">
                <h2 id="timeline-title"></h2>
                <button class="back-btn" onclick="showHome()">← Zurück zur Übersicht</button>
            </div>
            <div class="timeline" id="timeline-content"></div>
        </div>

        <div class="admin-panel" id="admin-panel">
            <div class="admin-header">
                <h3>🔐 Admin Panel</h3>
                <button class="logout-btn" onclick="logoutAdmin()" id="logout-btn" style="display: none;">Abmelden</button>
                <div style="clear: both;"></div>
            </div>
            
            <div id="login-form" class="login-form">
                <div class="form-group">
                    <label for="username">Benutzername:</label>
                    <input type="text" id="username" placeholder="Benutzername eingeben">
                </div>
                <div class="form-group">
                    <label for="password">Passwort:</label>
                    <input type="password" id="password" placeholder="Passwort eingeben">
                </div>
                <button class="form-btn" onclick="loginAdmin()">Anmelden</button>
                <div id="login-error" class="error-message" style="display: none;"></div>
            </div>

            <div id="add-event-form" class="add-event-form" style="display: none;">
                <div class="form-tabs">
                    <button class="tab-btn active" onclick="switchTab('add')">Ereignis hinzufügen</button>
                    <button class="tab-btn" onclick="switchTab('manage')">Ereignisse verwalten</button>
                </div>

                <div id="add-tab" class="tab-content">
                    <div class="form-group">
                        <label for="event-input">Ereignis beschreiben:</label>
                        <textarea id="event-input" placeholder="Beschreibe das historische Ereignis kurz, z.B.: 'Die Eroberung Konstantinopels durch die Osmanen 1453' oder 'Erfindung des Buchdrucks durch Gutenberg um 1440'. Claude wird automatisch alle Details ergänzen und richtig einordnen." style="height: 120px;"></textarea>
                    </div>
                    <button class="form-btn" onclick="processEventWithClaude()">Mit Claude verarbeiten</button>
                    
                    <div id="claude-processing" style="display: none; text-align: center; margin: 20px 0;">
                        <p style="color: #8b4513; font-style: italic;">Claude analysiert und formuliert das Ereignis...</p>
                    </div>

                    <div id="manual-form" style="display: none;">
                        <h4 style="color: #5d4037; margin: 20px 0 10px 0;">Claude's Vorschlag:</h4>
                        <div class="form-group">
                            <label for="event-title">Titel des Ereignisses:</label>
                            <input type="text" id="event-title" placeholder="z.B. Fall von Konstantinopel">
                        </div>
                        <div class="form-group">
                            <label for="event-time">Zeitpunkt:</label>
                            <input type="text" id="event-time" placeholder="z.B. 1453 n. Chr.">
                        </div>
                        <div class="form-group">
                            <label for="event-category">Kategorie:</label>
                            <select id="event-category">
                                <option value="urgeschichte">🌌 Urgeschichte</option>
                                <option value="erdzeitalter">🦕 Erdzeitalter und frühe Menschheit</option>
                                <option value="fruehgeschichte">🌾 Frühgeschichte</option>
                                <option value="antike">🏛️ Antike</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="event-description">Kurzbeschreibung:</label>
                            <input type="text" id="event-description" placeholder="Kurze Beschreibung für die Timeline">
                        </div>
                        <div class="form-group">
                            <label for="event-details">Detaillierte Beschreibung:</label>
                            <textarea id="event-details" placeholder="Ausführliche Beschreibung des Ereignisses und seiner Bedeutung"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="event-quote">Bill Wurtz Zitat (optional):</label>
                            <input type="text" id="event-quote" placeholder="Zitat aus dem Video (falls vorhanden)">
                        </div>
                        <button class="form-btn" onclick="addEvent()">Ereignis hinzufügen</button>
                    </div>
                </div>

                <div id="manage-tab" class="tab-content" style="display: none;">
                    <div class="form-group">
                        <label for="manage-category">Kategorie wählen:</label>
                        <select id="manage-category" onchange="loadEventsForManagement()">
                            <option value="">-- Kategorie wählen --</option>
                            <option value="urgeschichte">🌌 Urgeschichte</option>
                            <option value="erdzeitalter">🦕 Erdzeitalter und frühe Menschheit</option>
                            <option value="fruehgeschichte">🌾 Frühgeschichte</option>
                            <option value="antike">🏛️ Antike</option>
                        </select>
                    </div>
                    <div id="events-list"></div>
                </div>

                <div id="add-success" class="success-message" style="display: none;"></div>
                <div id="add-error" class="error-message" style="display: none;"></div>
            </div>
        </div>

        <div class="ai-chat">
            <div class="chat-header">
                <h3>🏺 Dein Geschichts-Gelehrter 🏺</h3>
                <p>Stelle Fragen zu den historischen Ereignissen und erhalte gelehrte Antworten!</p>
            </div>
            <div class="chat-container" id="chat-container">
                <div class="chat-message ai-message">
                    Grüße, wissensdurstiger Schüler! Ich bin dein Geschichts-Gelehrter und kenne alle Geheimnisse der Vergangenheit. Frage mich gerne alles über die Ereignisse in unserer Zeitleiste - von den kosmischen Anfängen bis zu den großen Reichen der Antike!
                </div>
            </div>
            <div class="loading" id="loading">Der Gelehrte studiert alte Schriftrollen...</div>
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="chat-input" placeholder="Stelle eine Frage zur Geschichte..." onkeypress="handleEnter(event)">
                <button class="chat-send" onclick="sendMessage()">Fragen</button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="event-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title"></h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body" id="modal-body"></div>
        </div>
    </div>

    <script>
        // Historische Daten - VOLLSTÄNDIG aus deiner Liste
        const historicalData = {
            urgeschichte: [
                {
                    id: 1,
                    title: "Big Bang",
                    time: "13,8 Mrd. Jahre",
                    description: "Der Urknall markiert den Beginn unseres Universums.",
                    details: "Der Urknall markiert den Beginn unseres Universums. Aus extrem heißer, dichter Materie entstanden Raum, Zeit, Energie und die ersten Elementarteilchen. Bildet den Startpunkt für alles, was wir heute kennen.",
                    video_quote: "Ich denke, es gibt jetzt ein Universum. Woraus besteht es? Quarks und Zeug"
                },
                {
                    id: 2,
                    title: "Rekombination",
                    time: "13,79996 Mrd. Jahre",
                    description: "Das Universum wurde durchsichtig für Licht.",
                    details: "Das Universum kühlte ab, sodass sich Elektronen mit Protonen zu neutralen Wasserstoffatomen verbinden konnten. Das Universum wurde durchsichtig für Licht - ein entscheidender Wendepunkt.",
                    video_quote: "Großartige Neuigkeiten! Die Elektronen haben sich jetzt angeschlossen"
                },
                {
                    id: 3,
                    title: "Entstehung der Erde",
                    time: "4,5 Mrd. Jahre",
                    description: "Aus einer rotierenden Scheibe bildeten sich die Planeten.",
                    details: "Aus einer rotierenden Scheibe aus Gas und Staub um die junge Sonne bildeten sich die Planeten, darunter unsere Erde. Ohne diesen 'Ball aus flammenden Gestein' gäbe es keine menschliche Geschichte.",
                    video_quote: "Hi, du bist auf einem Felsen, der im Weltraum schwebt"
                },
                {
                    id: 4,
                    title: "Entstehung des Mondes",
                    time: "~4,5 Mrd. Jahre",
                    description: "Ein planetengroßer Himmelskörper kollidierte mit der Erde.",
                    details: "Ein planetengroßer Himmelskörper kollidierte mit der jungen Erde. Aus den ins All geschleuderten Trümmern formte sich unser Mond. Stabilisiert die Erdachse und beeinflusst Gezeiten.",
                    video_quote: "Wir wurden von einem anderen Ball aus flammenden Gestein getroffen"
                },
                {
                    id: 5,
                    title: "Erste Ozeane",
                    time: "4 Mrd. Jahre",
                    description: "Wasser ist die Grundvoraussetzung für Leben.",
                    details: "Die Erde kühlte ab, Wasserdampf kondensierte zu Regen, und über Millionen von Jahren bildeten sich die ersten Ozeane. Wasser ist die Grundvoraussetzung für Leben.",
                    video_quote: "Wetter-Update: Es regnet. Schwerwiegende Flutwarnung: Die ganze Welt ist jetzt ein Ozean"
                },
                {
                    id: 6,
                    title: "Erstes Leben",
                    time: "3,5 Mrd. Jahre",
                    description: "Der Beginn des Lebens auf der Erde.",
                    details: "Einfachste einzellige Organismen entstanden in den Ozeanen, vermutlich in der Nähe hydrothermaler Quellen. Der Beginn des Lebens auf der Erde.",
                    video_quote: "Ein mikroskopisch kleines Lebewesen. Es lebt am Meeresgrund und ernährt sich von chemischer Suppe"
                }
            ],
            erdzeitalter: [
                {
                    id: 7,
                    title: "Photosynthese beginnt",
                    time: "3 Mrd. Jahre",
                    description: "Revolution in der Energiegewinnung und Sauerstoffproduktion",
                    details: "Erste Mikroorganismen (Cyanobakterien) entwickelten die Fähigkeit, Sonnenlicht in Energie umzuwandeln. Revolution in der Energiegewinnung und Sauerstoffproduktion",
                    video_quote: "Jetzt kannst du Sonnenlicht essen! Mit einer revolutionären Technik kannst du Sonnenlicht in Nahrung umwandeln"
                },
                {
                    id: 8,
                    title: "Große Sauerstoffkatastrophe",
                    time: "2,5 Mrd. Jahre",
                    description: "Machte komplexes, mehrzelligen Leben möglich.",
                    details: "Der durch Photosynthese produzierte Sauerstoff reicherte sich in der Atmosphäre an - die 'Große Sauerstoffkatastrophe'. Machte komplexes, mehrzelligen Leben möglich.",
                    video_quote: "Nebenwirkung: Jetzt gibt es überall Sauerstoff und der Himmel ist blau"
                },
                {
                    id: 9,
                    title: "Schneeballerde",
                    time: "750 – 580 Mio Jahre",
                    description: "Extreme Klimaereignisse, die die Evolution beeinflussten.",
                    details: "Die Erde war möglicherweise mehrmals komplett von Eis bedeckt, ein 'Schneeball Erde' Zustand. Extreme Klimaereignisse, die die Evolution des Lebens beeinflussten.",
                    video_quote: "Dann war die Erde vielleicht eine Weile ein Schneeball, vielleicht sogar ein paar Mal"
                },
                {
                    id: 10,
                    title: "Ozonschicht",
                    time: "650 Mio Jahre",
                    description: "Schutz vor schädlicher UV-Strahlung ermöglichte Leben an Land.",
                    details: "Der durch Photosynthese produzierte Sauerstoff bildete eine schützende Ozonschicht in der Atmosphäre. Schutz vor schädlicher UV-Strahlung ermöglichte Leben an Land.",
                    video_quote: "Die Sonne ist ein tödlicher Laser → Nicht mehr, da ist eine Decke"
                },
                {
                    id: 11,
                    title: "Kambrische Explosion",
                    time: "540 Mio Jahre",
                    description: "Grundlage der modernen Tierwelt und Biodiversität.",
                    details: "In einem geologisch kurzen Zeitraum von etwa 25 Millionen Jahren entstanden fast alle heute bekannten Tierstämme. Grundlage der modernen Tierwelt und Biodiversität.",
                    video_quote: "Die Kambrische Explosion - 'Wow, das sind Tiere und so'"
                },
                {
                    id: 12,
                    title: "Erste Landtiere",
                    time: "375 Mio Jahre",
                    description: "Beginn der Besiedelung des Festlands durch Wirbeltiere.",
                    details: "Fische entwickelten Gliedmaßen, die ihnen ermöglichten, an Land zu kriechen - die ersten Amphibien entstanden. Beginn der Besiedelung des Festlands durch Wirbeltiere.",
                    video_quote: "Jetzt können die Tiere an Land gehen. Kommt schon, Tiere, lasst uns an Land gehen!"
                },
                {
                    id: 13,
                    title: "Riesige Tiere im Perm",
                    time: "358 – 298 Mio Jahre",
                    description: "Erste große Vorläufer der Dinosaurier.",
                    details: "Nach dem Landegang der Wirbeltiere entwickelten sich im Karbon und Perm größere Landwirbeltiere wie riesige Amphibien und frühe Reptilien. Erste große Vorläufer der Dinosaurier.",
                    video_quote: "Und jetzt ist alles riesig. Einschließlich der Insekten."
                },
                {
                    id: 14,
                    title: "Dinosaurier",
                    time: "230 – 66 Mio Jahre",
                    description: "Die erfolgreichste Tiergruppe aller Zeiten.",
                    details: "Dinosaurier entwickelten sich und dominierten die Erde für über 160 Millionen Jahre. Sie besiedelten alle Kontinente und entwickelten enorme Vielfalt. Die erfolgreichste Tiergruppe aller Zeiten.",
                    video_quote: "Halt ein Auge auf dieses hier, es wird zu den Dinosauriern."
                },
                {
                    id: 15,
                    title: "Asteroideneinschlag",
                    time: "66 Mio Jahre",
                    description: "Ende der Dinosaurier-Ära, ermöglichte den Aufstieg der Säugetiere.",
                    details: "Ein gewaltiger Asteroid schlug im heutigen Mexiko ein und löste ein Massenaussterben aus. Ende der Dinosaurier-Ära, ermöglichte den Aufstieg der Säugetiere.",
                    video_quote: "Hier kommt ein Meteor... und die Dinosaurier sind weg."
                },
                {
                    id: 16,
                    title: "Säugetierzeit",
                    time: "Ab 66 Mio Jahre",
                    description: "Unsere eigenen evolutionären Vorfahren.",
                    details: "Nach dem Aussterben der Dinosaurier diversifizierten sich die Säugetiere rasch und besetzten freigewordene ökologische Nischen. Unsere eigenen evolutionären Vorfahren.",
                    video_quote: "Es ist Säugetierzeit."
                },
                {
                    id: 17,
                    title: "Erste Menschenaffen",
                    time: "20 Mio Jahre",
                    description: "Wichtiger Schritt auf dem Weg zum Menschen.",
                    details: "In Afrika entwickelten sich die ersten Menschenaffen (Hominoidea), die Vorfahren von Menschen, Schimpansen, Gorillas und Orang-Utans. Wichtiger Schritt auf dem Weg zum Menschen.",
                    video_quote: "Und einer von ihnen hat gerade gelernt, wie man Dinge greifen kann."
                },
                {
                    id: 18,
                    title: "Erste Werkzeuge",
                    time: "2,6 Mio Jahre",
                    description: "Beginn der Technologie.",
                    details: "Frühe Menschen begannen, Steine zu bearbeiten, um scharfe Kanten für das Schneiden zu erstellen - die ersten Werkzeuge. Beginn der Technologie.",
                    video_quote: "Und Steine zusammenschlagen, um spitze Steine zu machen."
                },
                {
                    id: 19,
                    title: "Feuernutzung",
                    time: "1 Mio Jahre",
                    description: "Ermöglichte bessere Nahrungsverwertung und Ausbreitung in kältere Regionen.",
                    details: "Frühmenschen lernten, Feuer zu kontrollieren und für Wärme, Schutz und Kochen zu nutzen. Ermöglichte bessere Nahrungsverwertung und Ausbreitung in kältere Regionen.",
                    video_quote: "Und Dinge in Brand setzen"
                },
                {
                    id: 20,
                    title: "Menschen und Sprache",
                    time: "135.000 – 100.000 Jahre",
                    description: "Ermöglichte bessere Zusammenarbeit, Weitergabe von Wissen und kulturelle Entwicklung.",
                    details: "Menschen entwickelten komplexe gesprochene Sprache mit Grammatik und erweitertem Wortschatz. Ermöglichte bessere Zusammenarbeit, Weitergabe von Wissen und kulturelle Entwicklung.",
                    video_quote: "Und verrückte Geräusche mit ihrer Stimme machen. 'Gneurshk.' Das kann verschiedene Dinge bedeuten."
                },
                {
                    id: 21,
                    title: "Menschen besiedeln die Welt",
                    time: "70.000 – 50.000 Jahre",
                    description: "Menschen passten sich an verschiedene Klimazonen an und besiedelten fast alle Erdteile",
                    details: "Von Afrika aus wanderten Menschen nach Asien, Europa, Australien und später über die Beringstraße nach Amerika. Menschen passten sich an verschiedene Klimazonen an und besiedelten fast alle Erdteile",
                    video_quote: "Eiszeit! Man kann hier rübergehen? Cool! Nicht mehr. Nun, ich schätze, wir sitzen jetzt hier fest."
                },
                {
                    id: 22,
                    title: "Ende der Eiszeit - Erste Menschen in der Schweiz",
                    time: "15.000 Jahre",
                    description: "Beginn der kontinuierlichen Besiedlung der Alpenregion",
                    details: "Erste Spuren menschlicher Besiedlung nach der Eiszeit. Beginn der kontinuierlichen Besiedlung der Alpenregion",
                    video_quote: ""
                },
                {
                    id: 23,
                    title: "Jäger und Sammler",
                    time: "300.000 – 10.000 Jahre",
                    description: "Längste Periode der menschlichen Existenz und Grundlage für alle späteren Gesellschaftsformen.",
                    details: "Frühe Menschen lebten als nomadische Jäger und Sammler, zogen ihrer Nahrung hinterher und entwickelten erste Werkzeuge und kulturelle Praktiken. Längste Periode der menschlichen Existenz und Grundlage für alle späteren Gesellschaftsformen.",
                    video_quote: "Lass uns nachsehen. Es gibt Menschen auf dem Planeten, und sie jagen ihr Essen."
                }
            ],
            fruehgeschichte: [
                {
                    id: 24,
                    title: "Landwirtschaft",
                    time: "10.000 Jahre",
                    description: "Neolithische Revolution - Grundlage für sesshafte Lebensweise.",
                    details: "Menschen im 'Fruchtbaren Halbmond' begannen, Pflanzen gezielt anzubauen und Tiere zu domestizieren, statt als Jäger und Sammler zu leben. Neolithische Revolution - Grundlage für sesshafte Lebensweise.",
                    video_quote: "Zum Teufel damit, Zeit, etwas Gras anzupflanzen. Schau dir das an! Ich kontrolliere das Essen jetzt. Alle meine Freunde leben bei mir. Lass uns alle Häuser bauen. Aber meines ist grösser, weil ich das Essen besitze."
                },
                {
                    id: 25,
                    title: "Ackerbau",
                    time: "10.000 bis 8.000 Jahre",
                    description: "Neolithische Revolution - Grundlage für sesshafte Lebensweise.",
                    details: "Menschen im 'Fruchtbaren Halbmond' begannen, Pflanzen gezielt anzubauen und Tiere zu domestizieren. Neolithische Revolution - Grundlage für sesshafte Lebensweise.",
                    video_quote: "Zum Teufel damit, Zeit, etwas Gras anzupflanzen"
                },
                {
                    id: 26,
                    title: "Erste Siedlungen in Eritrea",
                    time: "8.000 Jahre",
                    description: "Zeigt frühe Zivilisation in Afrika; älteste Kunstwerke der Region",
                    details: "Erste menschliche Siedlungen entstehen, Petroglyphen werden in Qohaito geschaffen. Zeigt frühe Zivilisation in Afrika; älteste Kunstwerke der Region",
                    video_quote: ""
                },
                {
                    id: 27,
                    title: "Erste Städte in Mesopotamien",
                    time: "4.000 Jahre",
                    description: "Beginn städtischer Zivilisation.",
                    details: "Im Zweistromland entstanden die ersten größeren Siedlungen mit spezialisiertem Handwerk, Handel und komplexen sozialen Strukturen. Beginn städtischer Zivilisation.",
                    video_quote: "Lasst uns alle Häuser bauen, aber meins ist größer, weil ich das Essen besitze"
                },
                {
                    id: 28,
                    title: "Erfindung des Rads",
                    time: "3200 Jahre",
                    description: "Revolutionierte Transport, Handel und Technologie.",
                    details: "In Mesopotamien wurde das Rad erfunden, zuerst für Töpferscheiben, später für Transport. Revolutionierte Transport, Handel und Technologie.",
                    video_quote: ""
                },
                {
                    id: 29,
                    title: "Gash-Kultur entsteht",
                    time: "3.000 Jahre",
                    description: "Frühe Hochkultur in Ostafrika; Grundlage für spätere Reiche",
                    details: "Entstehung der Gash-Kultur in der Region des heutigen Eritreas mit Landwirtschaft und Viehzucht. Frühe Hochkultur in Ostafrika; Grundlage für spätere Reiche",
                    video_quote: ""
                },
                {
                    id: 30,
                    title: "Erfindung der Bronze",
                    time: "3.000 Jahre",
                    description: "Erster großer Fortschritt in der Metallverarbeitung.",
                    details: "Die Mischung aus Kupfer und Zinn revolutionierte die Werkzeug- und Waffenherstellung und begründete die Bronzezeit. Erster großer Fortschritt in der Metallverarbeitung.",
                    video_quote: "Bronze - hergestellt mit der Spezialzutat Zinn aus dem fernen Land Zinnland."
                },
                {
                    id: 31,
                    title: "Schrift und Gesellschaft",
                    time: "3200 – 2500 Jahre",
                    description: "Ermöglichte komplexe Verwaltung und Wissensübertragung.",
                    details: "Entwicklung der ersten Schriftsysteme in Mesopotamien zur Verwaltung und Aufzeichnung. Ermöglichte komplexe Verwaltung und Wissensübertragung.",
                    video_quote: "Bessere Landwirtschaft wurde gerade erfunden. Und die Tiere helfen. Rate, was als nächstes passiert! Mehr Essen. Und mehr Leute, die Essen kaufen. Nun brauchen wir Leute, die helfen, das Essen zu produzieren. Nun brauchen wir Häuser für die Leute, die Essen produzieren. Und Leute, die die Häuser bauen. Und wir haben mehr Menschen. Und nun haben wir mehr Leute, Wirtschaft, Schrift, Geld."
                }
            ],
            antike: [
                {
                    id: 32,
                    title: "Ägyptische Zivilisation",
                    time: "3.100 Jahre",
                    description: "Eine der einflussreichsten frühen Zivilisationen.",
                    details: "Am Nil entstand eine der ersten Hochkulturen mit komplexer Verwaltung. Ägyptische Mythologie. Eine der einflussreichsten frühen Zivilisationen.",
                    video_quote: "Ägypten"
                },
                {
                    id: 33,
                    title: "Norte Chico Zivilisation",
                    time: "3500 – 1800 Jahre",
                    description: "Eine der frühesten städtischen Zivilisationen der Welt und die erste in Amerika.",
                    details: "Eine der ältesten komplexen Gesellschaften in Amerika entwickelte sich an der peruanischen Küste, mit riesiger Architektur und komplexen Bewässerungssystemen, jedoch ohne Keramik oder visuelle Kunst. Eine der frühesten städtischen Zivilisationen der Welt und die erste in Amerika.",
                    video_quote: "Norte Chico!"
                },
                {
                    id: 34,
                    title: "Indus Tal Zivilisation",
                    time: "2600 Jahre",
                    description: "Eine der frühesten städtischen Zivilisationen.",
                    details: "Hochentwickelte städtische Kultur mit Städten wie Mohenjo-Daro und Harappa, fortschrittlicher Stadtplanung und Wasserversorgung. Eine der frühesten städtischen Zivilisationen.",
                    video_quote: "Indus-Tal-Zivilisation... sie ist weg."
                },
                {
                    id: 35,
                    title: "Cheops-Pyramide",
                    time: "2560 Jahre",
                    description: "Technische Meisterleistung und Symbol ägyptischer Macht.",
                    details: "Die Cheops-Pyramide wird als eines der Sieben Weltwunder erbaut. Technische Meisterleistung und Symbol ägyptischer Macht.",
                    video_quote: "Pyramiden erbaut!"
                },
                {
                    id: 36,
                    title: "Zähmung der Pferde",
                    time: "2200 – 2000 Jahre",
                    description: "Revolutionierte Mobilität, Handel und Kriegsführung.",
                    details: "Menschen in der eurasischen Steppe begannen, Wildpferde zu zähmen und als Transportmittel zu nutzen. Revolutionierte Mobilität, Handel und Kriegsführung.",
                    video_quote: "Währenddessen wird irgendwo mitten im Nirgendwo wahrscheinlich das Pferd gezähmt."
                },
                {
                    id: 37,
                    title: "Erfindung des Streitwagens",
                    time: "2000 – 1700 Jahre",
                    description: "Veränderte die Kriegsführung grundlegend und beschleunigte Transport und Handel.",
                    details: "Die Kombination von Rädern mit gezähmten Pferden führte zur Entwicklung von Streitwagen. Veränderte die Kriegsführung grundlegend und beschleunigte Transport und Handel.",
                    video_quote: "Währenddessen haben sie irgendwo mitten im Nirgendwo herausgefunden, wie man Räder auf ein Pferd setzt. Jetzt kommen wir voran."
                },
                {
                    id: 38,
                    title: "Vedische Zeit und früher Hinduismus",
                    time: "1800 – 1500 Jahre",
                    description: "Grundlage des Hinduismus und der sozialen Strukturen Indiens.",
                    details: "Einwanderung indogermanischer Völker nach Nordindien, Entstehung der Veden (religiöse Texte) und des Kastensystems. Grundlage des Hinduismus und der sozialen Strukturen Indiens.",
                    video_quote: "Neue Ankömmlinge in Indien... und sie schrieben einige Hymnen und Mantras und solches Zeug. Daraus könnte man eine Religion machen!"
                },
                {
                    id: 39,
                    title: "Hyksos und andere Reitervölker verändern den Nahen Osten",
                    time: "1650 – 1550 Jahre",
                    description: "Beginn einer Periode ständig wechselnder Machtverhältnisse und kultureller Vermischung in der Region.",
                    details: "Reitervölker mit überlegener Mobilität fielen in den Nahen Osten ein und etablierten eigene Reiche, was die geopolitische Situation verkomplizierte. Beginn einer Periode ständig wechselnder Machtverhältnisse und kultureller Vermischung in der Region.",
                    video_quote: "Der Nahe Osten wird komplizierter. Vielleicht, weil er in der Mitte des Ostens liegt. Klopf, klopf. Äh... Klipp, klapp. Es sind die Leute mit den Pferden, und sie haben ein Imperium gegründet, und dann haben alle anderen ihre Pferde kopiert."
                },
                {
                    id: 40,
                    title: "Shang Dynastie",
                    time: "1600 Jahre",
                    description: "Beginn der dokumentierten chinesischen Geschichte und Kultur.",
                    details: "Die erste gut dokumentierte chinesische Dynastie entwickelte die frühe chinesische Schrift und fortschrittliche Bronzetechnologie. Beginn der dokumentierten chinesischen Geschichte und Kultur.",
                    video_quote: "China hat sich gerade wieder zusammengesetzt"
                },
                {
                    id: 41,
                    title: "Vulkanausbruch Santorin",
                    time: "1450 Jahre",
                    description: "Ende einer wichtigen bronzezeitlichen Kultur.",
                    details: "Gewaltiger Vulkanausbruch zerstört die minoische Zivilisation auf Kreta. Ende einer wichtigen bronzezeitlichen Kultur.",
                    video_quote: ""
                },
                {
                    id: 42,
                    title: "Ende der Bronzezeit",
                    time: "1225 – 1150 Jahre",
                    description: "Ende einer Epoche, ermöglichte Aufstieg neuer Völker wie der Phönizier.",
                    details: "Mysteriöser und sehr schneller Zusammenbruch vieler Bronzezeit-Zivilisationen im östlichen Mittelmeerraum. Sie verschwinden komplett (Babylonier, Hethiter, Minoer, Mykener) oder sind stark geschwächt (Ägypten). Ende einer Epoche, ermöglichte Aufstieg neuer Völker wie der Phönizier.",
                    video_quote: "Da ist der Zusammenbruch der Bronze-Zeit."
                },
                {
                    id: 43,
                    title: "Phönizier und erste Kolonien",
                    time: "1200 – 800 Jahre",
                    description: "Verbreitung des Alphabets und des Handels.",
                    details: "Die Phönizier, ein Seefahrervolk im östlichen Mittelmeer, gründeten Handelsniederlassungen entlang der Mittelmeerküste, darunter Karthago. Verbreitung des Alphabets und des Handels.",
                    video_quote: "Die Phönizier gründen einige Kolonien."
                },
                {
                    id: 44,
                    title: "Olmekische Kultur",
                    time: "1200 – 400 Jahre v. Chr.",
                    description: "'Mutterkultur' für spätere mesoamerikanische Zivilisationen wie Maya und Azteken.",
                    details: "Erste große Zivilisation Mesoamerikas, bekannt für monumentale Steinköpfe, erste Schrift und religiöse Zentren. 'Mutterkultur' für spätere mesoamerikanische Zivilisationen wie Maya und Azteken.",
                    video_quote: "Hier sind einige riesige Köpfe. Das müssen die Olmeken sein."
                },
                {
                    id: 45,
                    title: "Eisenzeit beginnt",
                    time: "1.000 Jahre",
                    description: "Technologischer Sprung, ermöglicht bessere Landwirtschaft und Kriegsführung.",
                    details: "Eisen ersetzt Bronze als dominantes Metall für Werkzeuge und Waffen. Technologischer Sprung, ermöglicht bessere Landwirtschaft und Kriegsführung.",
                    video_quote: ""
                },
                {
                    id: 46,
                    title: "Rückkehr der 12 Stämme Israels",
                    time: "1.000 Jahre",
                    description: "Wichtiger Abschnitt in der jüdischen Geschichte; Stärkung des Monotheismus.",
                    details: "Nach dem babylonischen Exil kehrten Teile der jüdischen Bevölkerung in ihr Heimatland zurück und begannen mit dem Wiederaufbau Jerusalems und des Tempels. Wichtiger Abschnitt in der jüdischen Geschichte; Stärkung des Monotheismus und Grundlage für spätere religiöse Entwicklungen.",
                    video_quote: "Schaut, wer nach Israel zurückgekommen ist – es sind die zwölf Stämme Israel! Und sie glauben an Gott! Nur an einen – er hat so ein 10-Schritte-Programm."
                },
                {
                    id: 47,
                    title: "Reich von D'mt",
                    time: "1000 Jahre",
                    description: "Eines der ersten organisierten Reiche in Ostafrika",
                    details: "Reich von D'mt (Damot) erstreckt sich über Eritrea und Nordäthiopien. Eines der ersten organisierten Reiche in Ostafrika",
                    video_quote: ""
                },
                {
                    id: 48,
                    title: "König Salomo und Tempelbau",
                    time: "970 – 930 Jahre",
                    description: "Zentrum des jüdischen Glaubens, Höhepunkt des israelitischen Königreichs.",
                    details: "Salomo baut den ersten Tempel in Jerusalem und führt Israel zu kultureller Blüte. Zentrum des jüdischen Glaubens, Höhepunkt des israelitischen Königreichs.",
                    video_quote: ""
                },
                {
                    id: 49,
                    title: "Griechische Stadtstaaten",
                    time: "800 – 300 Jahre",
                    description: "Grundlage westlicher Philosophie, Theater, Wissenschaft und Politik.",
                    details: "In Griechenland entwickelten sich unabhängige Stadtstaaten (Poleis) mit verschiedenen Regierungsformen, darunter die Demokratie in Athen. Grundlage westlicher Philosophie, Theater, Wissenschaft und Politik.",
                    video_quote: "Die Griechen hatten gerade die Idee, über Dinge nachzudenken."
                },
                {
                    id: 50,
                    title: "Israeliten im Babylonischen Exil",
                    time: "586 v. Chr.",
                    description: "Prägt jüdische Identität und Religion fundamental.",
                    details: "Nebukadnezar zerstört Jerusalem und den Tempel, führt Juden ins Exil nach Babylon. Prägt jüdische Identität und Religion fundamental.",
                    video_quote: ""
                },
                {
                    id: 51,
                    title: "Aufstieg des Persischen Reichs",
                    time: "550 Jahre",
                    description: "Erstes multiethnisches Großreich mit effizientem Verwaltungssystem.",
                    details: "Unter Kyros dem Großen und seinen Nachfolgern (Achämeniden) entstand das bis dahin größte Weltreich, das sich von Ägypten bis Indien erstreckte. Erstes multiethnisches Großreich mit effizientem Verwaltungssystem, Religionsfreiheit und ausgedehntem Straßennetz.",
                    video_quote: "Ach, das ist das Babylo... Mede... Das Persische Reich! Wow, das ist groß."
                },
                {
                    id: 52,
                    title: "Israeliten kehren zurück",
                    time: "538 Jahre",
                    description: "Zweiter Tempel wird zum Zentrum des Judentums.",
                    details: "Perserkönig Kyros erlaubt Juden die Rückkehr und den Wiederaufbau des Tempels. Zweiter Tempel wird zum Zentrum des Judentums.",
                    video_quote: ""
                },
                {
                    id: 53,
                    title: "Kleisthenes und athenische Demokratie",
                    time: "508 Jahre",
                    description: "Geburt der Demokratie als Regierungsform.",
                    details: "Kleisthenes führt demokratische Reformen in Athen ein. Geburt der Demokratie als Regierungsform.",
                    video_quote: ""
                },
                {
                    id: 54,
                    title: "Buddha und Buddhismus",
                    time: "500 Jahre",
                    description: "Eine der großen Weltreligionen mit bedeutendem kulturellen Einfluss.",
                    details: "Siddhartha Gautama (Buddha) lehrte in Nordindien einen Weg zur Überwindung des Leidens und zur Erleuchtung. Eine der großen Weltreligionen mit bedeutendem kulturellen Einfluss.",
                    video_quote: "Der Buddha wurde gerade erleuchtet - ein Typ, der so lange unter einem Baum saß, bis er herausfand, wie man ignorieren kann, dass wir alle sterben. Da kann man eine Religion draus machen."
                },
                {
                    id: 55,
                    title: "Konfuzius",
                    time: "500 Jahre",
                    description: "Grosser Einfluss auf ostasiatisches Denken und Gesellschaft.",
                    details: "Der chinesische Philosoph Konfuzius entwickelte eine Lehre von sozialer Harmonie, sozialer Ethik und richtigen Beziehungen. Grosser Einfluss auf ostasiatisches Denken und Gesellschaft.",
                    video_quote: "Whoops, China ist gerade zerbrochen. Aber Konfuzius fand heraus, wie man gute Moral haben kann."
                },
                {
                    id: 56,
                    title: "Perserkriege",
                    time: "490 – 479 Jahre",
                    description: "Rettung der griechischen Zivilisation vor persischer Herrschaft.",
                    details: "Griechen besiegen zwei persische Invasionen (Marathon, Salamis, Plataiai). Rettung der griechischen Zivilisation vor persischer Herrschaft.",
                    video_quote: ""
                },
                {
                    id: 57,
                    title: "Peloponnesischer Krieg",
                    time: "431 – 404 Jahre",
                    description: "Ende des athenischen Goldenen Zeitalters.",
                    details: "Athen gegen Sparta, endet mit Spartas Sieg und Athens Niedergang. Ende des athenischen Goldenen Zeitalters.",
                    video_quote: ""
                },
                {
                    id: 58,
                    title: "Alexander der Grosse",
                    time: "336 – 323 Jahre",
                    description: "Verbreitung griechischer Kultur in Asien (Hellenismus).",
                    details: "Der mazedonische König eroberte das Persische Reich und schuf ein Imperium, das von Griechenland bis Indien reichte. Verbreitung griechischer Kultur in Asien (Hellenismus).",
                    video_quote: "Alexander hatte gerade die Idee, das gesamte persische Reich zu erobern. Eine großartige Idee. Er war großartig."
                },
                {
                    id: 59,
                    title: "Chandragupta gründet Maurya-Reich",
                    time: "321 – 297 Jahre",
                    description: "Erste umfassende Einigung Indiens, Beginn eines mächtigen Reiches.",
                    details: "Chandragupta Maurya stürzte die Nanda-Dynastie, vertrieb die griechisch-mazedonischen Besatzer und gründete das erste große indische Reich. Erste umfassende Einigung Indiens, Beginn eines mächtigen Reiches mit effizientem Verwaltungssystem.",
                    video_quote: "Klopf klopf, es ist Chandragupta. Er sagt, verschwindet hier. Wirst du verschwinden, wenn ich dir 500 Elefanten gebe? Ok, danke, tschüss."
                },
                {
                    id: 60,
                    title: "Tamil-Könige",
                    time: "300 v. Chr – 300 n. Chr",
                    description: "Bewahrung der tamilischen Kultur und Kontrolle wichtiger Handelsrouten.",
                    details: "Südindische Königreiche kontrollierten den Gewürzhandel und widerstanden erfolgreich nördlichen Eroberern. Bewahrung der tamilischen Kultur und Kontrolle wichtiger Handelsrouten.",
                    video_quote: "Das sind die Tamil-Könige, niemand erobert die Tamil-Könige. Wer sind die Tamil-Könige? Händler, wahrscheinlich, und sie haben Gewürze"
                },
                {
                    id: 61,
                    title: "Punische Kriege",
                    time: "264 – 146 Jahre",
                    description: "Rom wird zur Mittelmeermacht, Karthago wird zerstört.",
                    details: "Rom kämpft drei Kriege gegen Karthago, Hannibal überquert die Alpen. Rom wird zur Mittelmeermacht, Karthago wird zerstört.",
                    video_quote: ""
                },
                {
                    id: 62,
                    title: "Kaiser Ashoka",
                    time: "261 – 232 Jahre",
                    description: "Erste große Einigung Indiens, Verbreitung des Buddhismus.",
                    details: "Kaiser Ashoka vereinigte fast den gesamten indischen Subkontinent, konvertierte zum Buddhismus und förderte Gewaltlosigkeit und religiöse Toleranz. Erste große Einigung Indiens, Verbreitung des Buddhismus.",
                    video_quote: "Zeit, ganz Indien zu erobern... oder den größten Teil von Indien"
                },
                {
                    id: 63,
                    title: "Erste chinesische Einigung unter Qin Shi Huang",
                    time: "221 Jahre",
                    description: "Schuf die Grundlagen des chinesischen Kaiserreichs.",
                    details: "Der 'Erste Kaiser' vereinigte China, standardisierte Schrift, Maße, Gewichte und begann den Bau der Großen Mauer. Schuf die Grundlagen des chinesischen Kaiserreichs.",
                    video_quote: "China ist wieder zusammen."
                },
                {
                    id: 64,
                    title: "Han-Dynastie in China",
                    time: "206 v. Chr – 220 n. Chr.",
                    description: "Konfuzianismus wurde Staatsideologie, Seidenstraße eröffnet.",
                    details: "Goldenes Zeitalter des frühen China mit Bevölkerungswachstum, wirtschaftlicher Prosperität, kultureller Blüte und territorialer Expansion. Konfuzianismus wurde Staatsideologie, Seidenstraße eröffnet.",
                    video_quote: "China hat gerade Bomben und Schrift erfunden."
                },
                {
                    id: 65,
                    title: "Seidenstraße",
                    time: "100 v. Chr. – 1.500 n. Chr",
                    description: "Erste große transkontinentale Handelsverbindung.",
                    details: "Ein Netzwerk von Handelsrouten verband China mit Europa und ermöglichte den Austausch von Waren, Technologien und Ideen. Erste große transkontinentale Handelsverbindung.",
                    video_quote: "Sie haben gerade eine brandneue Straße zur Welt gebaut"
                },
                {
                    id: 66,
                    title: "Julius Cäsar",
                    time: "49 – 44 Jahre v. Chr.",
                    description: "Ende der römischen Republik, Weg zum Kaiserreich.",
                    details: "Caesar überquert den Rubikon, wird Diktator und wird ermordet. Ende der römischen Republik, Weg zum Kaiserreich.",
                    video_quote: ""
                },
                {
                    id: 67,
                    title: "Römisches Reich",
                    time: "27 v. Chr. – 476 n. Chr.",
                    description: "Prägte Europa und den Mittelmeerraum nachhaltig.",
                    details: "Rom stieg von einem Stadtstaat zu einem gewaltigen Imperium auf, das den gesamten Mittelmeerraum umfasste und seine Kultur, Sprache und Recht verbreitete. Prägte Europa und den Mittelmeerraum nachhaltig.",
                    video_quote: "Die Römer essen das gesamte Mittelmeer zum Frühstück"
                }
            ]
        };

        // Admin-Funktionalität
        let isLoggedIn = false;
        let nextEventId = 68; // Nächste verfügbare ID
        let addedEventIds = new Set(); // Track added events for deletion

        // Claude API Configuration
        const CLAUDE_API_KEY = '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';
        const CLAUDE_API_URL = 'https://api.anthropic.com/v1/messages';

        function switchTab(tab) {
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Show/hide tab content
            document.getElementById('add-tab').style.display = tab === 'add' ? 'block' : 'none';
            document.getElementById('manage-tab').style.display = tab === 'manage' ? 'block' : 'none';

            // Clear messages
            document.getElementById('add-success').style.display = 'none';
            document.getElementById('add-error').style.display = 'none';
        }

        async function processEventWithClaude() {
            const input = document.getElementById('event-input').value.trim();
            const processingDiv = document.getElementById('claude-processing');
            const manualForm = document.getElementById('manual-form');
            const errorDiv = document.getElementById('add-error');
            const successDiv = document.getElementById('add-success');

            if (!input) {
                errorDiv.textContent = 'Bitte geben Sie eine Beschreibung des Ereignisses ein!';
                errorDiv.style.display = 'block';
                return;
            }

            processingDiv.style.display = 'block';
            errorDiv.style.display = 'none';
            successDiv.style.display = 'none';

            try {
                const response = await fetch(CLAUDE_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': CLAUDE_API_KEY,
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-3-sonnet-20240229',
                        max_tokens: 1000,
                        messages: [{
                            role: 'user',
                            content: `Du bist ein Experte für Weltgeschichte und hilfst beim Erstellen einer historischen Timeline. 

Analysiere folgendes historisches Ereignis und gib mir eine strukturierte Antwort im JSON-Format:

"${input}"

Kontext: Die Timeline reicht vom Urknall bis zur Antike (Jahr 0) und ist in 4 Kategorien unterteilt:
- urgeschichte: 13,8 Mrd. - 3,5 Mrd. Jahre (Big Bang bis erstes Leben)
- erdzeitalter: 3,5 Mrd. - 10.000 Jahre (Evolution bis neolithische Revolution)  
- fruehgeschichte: 10.000 - 3.000 Jahre (Landwirtschaft bis erste Hochkulturen)
- antike: 3.000 Jahre - Jahr 0 (Hochkulturen, Griechenland, Rom)

Bitte antworte ausschließlich mit folgendem JSON-Format:

{
  "title": "Prägnanter Titel des Ereignisses",
  "time": "Zeitangabe (z.B. '1453 n. Chr.' oder '2500 v. Chr.')",
  "category": "urgeschichte|erdzeitalter|fruehgeschichte|antike",
  "description": "Kurze Beschreibung für die Timeline (max. 80 Zeichen)",
  "details": "Ausführliche Beschreibung mit historischer Bedeutung (2-3 Sätze)",
  "video_quote": "Passender humorvoller Kommentar im Stil von Bill Wurtz (optional, sonst leer lassen)"
}

Wichtig: Ordne das Ereignis der RICHTIGEN Zeitperiode zu! Falls das Ereignis nach Jahr 0 liegt, setze category auf "antike" und erwähne in den details, dass es eigentlich in die spätere Geschichte gehört.`
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.content && data.content[0] && data.content[0].text) {
                    try {
                        const eventData = JSON.parse(data.content[0].text);
                        
                        // Fill the form with Claude's suggestions
                        document.getElementById('event-title').value = eventData.title || '';
                        document.getElementById('event-time').value = eventData.time || '';
                        document.getElementById('event-category').value = eventData.category || 'antike';
                        document.getElementById('event-description').value = eventData.description || '';
                        document.getElementById('event-details').value = eventData.details || '';
                        document.getElementById('event-quote').value = eventData.video_quote || '';

                        manualForm.style.display = 'block';
                        processingDiv.style.display = 'none';
                        
                    } catch (parseError) {
                        throw new Error('Claude\'s Antwort konnte nicht verarbeitet werden');
                    }
                } else {
                    throw new Error('Unerwartete Antwort von Claude');
                }
            } catch (error) {
                console.error('Claude API Error:', error);
                errorDiv.textContent = 'Fehler bei der Verarbeitung mit Claude. Bitte versuchen Sie es erneut oder füllen Sie das Formular manuell aus.';
                errorDiv.style.display = 'block';
                processingDiv.style.display = 'none';
                manualForm.style.display = 'block';
            }
        }

        function loadEventsForManagement() {
            const category = document.getElementById('manage-category').value;
            const eventsList = document.getElementById('events-list');
            
            if (!category) {
                eventsList.innerHTML = '';
                return;
            }

            const events = historicalData[category];
            let html = `<h4 style="color: #5d4037; margin-bottom: 15px;">Ereignisse in dieser Kategorie:</h4>`;
            
            // Show all events, but only allow deletion of added ones
            events.forEach(event => {
                const canDelete = addedEventIds.has(event.id);
                html += `
                    <div class="event-item">
                        <div class="event-info">
                            <h4>${event.title}</h4>
                            <p><strong>${event.time}</strong> - ${event.description}</p>
                        </div>
                        ${canDelete ? `<button class="delete-btn" onclick="deleteEvent(${event.id}, '${category}')">Löschen</button>` : '<span style="color: #999; font-style: italic;">Original</span>'}
                    </div>
                `;
            });
            
            eventsList.innerHTML = html;
        }

        function deleteEvent(eventId, category) {
            if (!addedEventIds.has(eventId)) {
                alert('Nur hinzugefügte Ereignisse können gelöscht werden!');
                return;
            }

            if (confirm('Sind Sie sicher, dass Sie dieses Ereignis löschen möchten?')) {
                // Remove from data
                historicalData[category] = historicalData[category].filter(event => event.id !== eventId);
                addedEventIds.delete(eventId);
                
                // Refresh the management view
                loadEventsForManagement();
                
                // If we're currently viewing this category, refresh the timeline
                if (currentCategory === category && document.getElementById('timeline-view').style.display === 'block') {
                    showTimeline(category);
                }

                document.getElementById('add-success').textContent = 'Ereignis wurde erfolgreich gelöscht!';
                document.getElementById('add-success').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('add-success').style.display = 'none';
                }, 3000);
            }
        }

        function showAdminLogin() {
            const adminPanel = document.getElementById('admin-panel');
            if (adminPanel.style.display === 'none' || adminPanel.style.display === '') {
                adminPanel.style.display = 'block';
                adminPanel.scrollIntoView({ behavior: 'smooth' });
            } else {
                adminPanel.style.display = 'none';
            }
        }

        function loginAdmin() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('login-error');

            if (username === 'mheer' && password === 'Start123') {
                isLoggedIn = true;
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('add-event-form').style.display = 'block';
                document.getElementById('logout-btn').style.display = 'block';
                errorDiv.style.display = 'none';
                
                // Clear login fields
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
            } else {
                errorDiv.textContent = 'Falscher Benutzername oder Passwort!';
                errorDiv.style.display = 'block';
            }
        }

        function logoutAdmin() {
            isLoggedIn = false;
            document.getElementById('add-event-form').style.display = 'none';
            document.getElementById('login-form').style.display = 'block';
            document.getElementById('logout-btn').style.display = 'none';
            
            // Clear all form fields
            document.getElementById('event-input').value = '';
            document.getElementById('event-title').value = '';
            document.getElementById('event-time').value = '';
            document.getElementById('event-description').value = '';
            document.getElementById('event-details').value = '';
            document.getElementById('event-quote').value = '';
            document.getElementById('manual-form').style.display = 'none';
            document.getElementById('add-success').style.display = 'none';
            document.getElementById('add-error').style.display = 'none';
            
            // Reset to add tab
            switchTabManually('add');
        }

        function switchTabManually(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-btn')[tab === 'add' ? 0 : 1].classList.add('active');
            document.getElementById('add-tab').style.display = tab === 'add' ? 'block' : 'none';
            document.getElementById('manage-tab').style.display = tab === 'manage' ? 'block' : 'none';
        }

        function addEvent() {
            if (!isLoggedIn) {
                alert('Sie müssen sich zuerst anmelden!');
                return;
            }

            const title = document.getElementById('event-title').value.trim();
            const time = document.getElementById('event-time').value.trim();
            const category = document.getElementById('event-category').value;
            const description = document.getElementById('event-description').value.trim();
            const details = document.getElementById('event-details').value.trim();
            const quote = document.getElementById('event-quote').value.trim();

            const successDiv = document.getElementById('add-success');
            const errorDiv = document.getElementById('add-error');

            // Validation
            if (!title || !time || !description || !details) {
                errorDiv.textContent = 'Bitte füllen Sie alle Pflichtfelder aus!';
                errorDiv.style.display = 'block';
                successDiv.style.display = 'none';
                return;
            }

            // Create new event object
            const newEvent = {
                id: nextEventId++,
                title: title,
                time: time,
                description: description,
                details: details,
                video_quote: quote
            };

            // Add to the appropriate category
            historicalData[category].push(newEvent);
            addedEventIds.add(newEvent.id); // Track for deletion

            // Success message
            successDiv.textContent = `Ereignis "${title}" wurde erfolgreich hinzugefügt!`;
            successDiv.style.display = 'block';
            errorDiv.style.display = 'none';

            // Clear form
            document.getElementById('event-input').value = '';
            document.getElementById('event-title').value = '';
            document.getElementById('event-time').value = '';
            document.getElementById('event-description').value = '';
            document.getElementById('event-details').value = '';
            document.getElementById('event-quote').value = '';
            document.getElementById('manual-form').style.display = 'none';

            // If we're currently viewing the category where the event was added, refresh the timeline
            if (currentCategory === category && document.getElementById('timeline-view').style.display === 'block') {
                showTimeline(category);
            }
        }

        // Handle Enter key in login form
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('username').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    loginAdmin();
                }
            });
        });

        // Gemini API Key
                }
            });
        });

        // Gemini API Key (bitte deinen echten Key hier einfügen)
        const GEMINI_API_KEY = 'AIzaSyAJ52b330dLaXxZPcLPx8tt7jdl0sdB-2k';
        const GEMINI_API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${GEMINI_API_KEY}`;

        let currentCategory = '';

        function showTimeline(category) {
            document.getElementById('home-view').style.display = 'none';
            document.getElementById('timeline-view').style.display = 'block';
            currentCategory = category;
            
            const titles = {
                'urgeschichte': '🌌 Urgeschichte (13,8 Mrd. - 3,5 Mrd. Jahre)',
                'erdzeitalter': '🦕 Erdzeitalter und frühe Menschheit (3,5 Mrd. - 10.000 Jahre)',
                'fruehgeschichte': '🌾 Frühgeschichte (10.000 - 3.000 Jahre)',
                'antike': '🏛️ Antike (3.000 Jahre - Christi Geburt)'
            };
            
            document.getElementById('timeline-title').textContent = titles[category];
            
            const timelineContent = document.getElementById('timeline-content');
            timelineContent.innerHTML = '';
            
            const events = historicalData[category];
            events.forEach((event, index) => {
                const timelineItem = document.createElement('div');
                timelineItem.className = `timeline-item ${index % 2 === 0 ? 'left' : 'right'}`;
                timelineItem.onclick = () => showEventDetails(event);
                
                timelineItem.innerHTML = `
                    <div class="timeline-content">
                        <h3>${event.title}</h3>
                        <div class="time">${event.time}</div>
                        <p>${event.description}</p>
                    </div>
                `;
                
                timelineContent.appendChild(timelineItem);
            });
        }

        function showHome() {
            document.getElementById('timeline-view').style.display = 'none';
            document.getElementById('home-view').style.display = 'block';
        }

        function showEventDetails(event) {
            document.getElementById('modal-title').textContent = event.title;
            
            let modalContent = `
                <span class="time">${event.time}</span>
                <p><strong>Was passierte:</strong> ${event.details}</p>
            `;
            
            if (event.video_quote && event.video_quote.trim() !== '') {
                modalContent += `
                    <div class="quote">
                        <strong>Im Video von Bill Wurtz:</strong><br>
                        "${event.video_quote}"
                    </div>
                `;
            }
            
            document.getElementById('modal-body').innerHTML = modalContent;
            document.getElementById('event-modal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('event-modal').style.display = 'none';
        }

        // Chat-Funktionalität
        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            // User-Nachricht anzeigen
            addChatMessage(message, 'user');
            input.value = '';
            
            // Loading anzeigen
            document.getElementById('loading').style.display = 'block';
            
            try {
                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `Du bist ein weiser Geschichts-Gelehrter im Stil der Antike und hilfst Schülern beim Verstehen der Weltgeschichte. Beantworte die folgende Frage verständlich, lehrreich und mit einem Hauch von antikem Flair auf Deutsch. 
                                
Kontext: Wir befassen uns mit der Geschichte vom Urknall bis zur Antike, inspiriert vom YouTube-Video "History of the Entire World, i guess" von Bill Wurtz. Du kennst alle Ereignisse aus unserer Zeitleiste.

Frage: ${message}

Antworte wie ein gelehrter Historiker der Antike - freundlich, weise und in einem für Schüler verständlichen Stil. Verwende gerne auch Bezüge zum Video von Bill Wurtz, wenn passend. Beginne deine Antwort mit einer passenden Anrede wie "Mein wissbegieriger Schüler" oder ähnlich.`
                            }]
                        }]
                    })
                });
                
                const data = await response.json();
                
                if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                    const aiResponse = data.candidates[0].content.parts[0].text;
                    addChatMessage(aiResponse, 'ai');
                } else {
                    addChatMessage('Entschuldigung, mein wissbegieriger Schüler, ich konnte deine Frage nicht beantworten. Die alten Schriftrollen sind heute schwer zu entziffern. Versuche es bitte noch einmal.', 'ai');
                }
            } catch (error) {
                console.error('Fehler beim Abrufen der AI-Antwort:', error);
                addChatMessage('Es gab einen Fehler bei der Verbindung zu den himmlischen Sphären des Wissens. Bitte versuche es später noch einmal, werter Schüler.', 'ai');
            }
            
            // Loading ausblenden
            document.getElementById('loading').style.display = 'none';
        }

        function addChatMessage(message, sender) {
            const chatContainer = document.getElementById('chat-container');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}-message`;
            messageDiv.textContent = message;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function handleEnter(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Modal schließen bei Klick außerhalb
        window.onclick = function(event) {
            const modal = document.getElementById('event-modal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>
